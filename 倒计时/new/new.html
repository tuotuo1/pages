<html>

<head>
    <meta charset="utf-8" http-equiv="Content-Type" content="text/html">

    <title>芙蓉倒计时</title>
    <link rel="stylesheet" href="new.css" />
    <script type="text/javascript" src="js/jquery.js"></script>
</head>

<body>
    <div class="container">
        <h1>开始倒计时</h1>
        <p class="date"> 请输入：<input tpye="text" id="year" value="2016">年<input tpye="text" id="month" value="01">月<input tpye="text" id="day" value="01">日</p>
        <button id="0buton">倒计时</button>
        <p class="remain">现在距离<span id="keys">0000年00月00日</span>还剩</p>
        <p class="bottom"><span id="b_day">000</span>天<span id="b_hour">00</span>小时<span id="b_minute">00</span>分<span id="b_second">00</span>秒</p>
    </div>
</body>
<script>
    window.onload = function(){
        var osetday = document.getElementById("b_day");
        var osethour = document.getElementById("b_hour");
        var osetmin = document.getElementById("b_minute");
        var osetsecond = document.getElementById("b_second");
        var in_value_year = document.getElementById("year")
        var in_value_month = document.getElementById("month");
        var in_value_date = document.getElementById("day");
        var input_keys = document.getElementById("keys");
        var obtn = document.getElementById("0buton");
        function addzero(num,n){
            var str = "" + num;
            if(str.length < n){
                str = "0" + num;
            }
            return str;
        }
        //点击进入倒计时
            obtn.onclick = function(){
                input_keys.innerHTML = in_value_year.value + "年" + in_value_month.value + "月" + in_value_date.value;
                setInterval(updateTime,1000);
                updateTime();
            }
        
        
        function updateTime(){//倒计时函数
            var endTime = new Date();/*用户输入*/
            var da = new Date();/*保存现在的时间*/
            endTime.setFullYear(parseInt(in_value_year.value));
            endTime.setMonth(parseInt(in_value_month.value) - 1);
            endTime.setDate(parseInt(in_value_date.value));
            endTime.setHours(0);
            endTime.setMinutes(0);
            endTime.setSeconds(0);
            
            var iTime = (endTime.getTime()-da.getTime())/1000;//现在距离输入时间的差秒数
            if(iTime<0){return};//毫秒数小于0，就跳出程序
            var iDate = parseInt(iTime/(24*3600));//在毫秒差中，计算天数
            iTime %= (24*3600);//计算天数之后的余数是多少
            var iHour= parseInt(iTime/3600);
            iTime %= 3600;
            var iMin= parseInt(iTime/60);
            iTime %= 60;
            var iSecond= parseInt(iTime);
            osetday.innerHTML = addzero(iDate,3);//显示倒计时天数
            osethour.innerHTML = addzero(iHour,2);
            osetmin.innerHTML = addzero(iMin,2);
            osetsecond.innerHTML = addzero(iSecond,2);


        }
    }
    
</script>

</html>